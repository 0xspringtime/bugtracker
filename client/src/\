import React, { useState, useEffect } from "react";
import axios from 'axios'
import "./AddIssue.css";
import { Form, Dropdown, DropdownButton, InputGroup } from 'react-bootstrap'
import issueService from './services/issues'

function AddIssue() {
  
  const [notes, setNotes] = useState([]);    
  const [issues, setIssues] = useState([]);    
  const [newNote, setNewNote] = useState('')
  const [newissue, setNewIssue] = useState('')
  const [desc, setDesc] = useState(true);
  const [dev, setDev] = useState(true);
  const [prior, setPrior] = useState(true);
  const issueadd = () => {
    const newIssue = {
        date: new Date().toISOString(),
        desc: desc,
        dev: dev,
        prior: prior,
    }
  axios
    .post('http://localhost:3001/notes', newIssue)
    .then(response => {
      setIssues(issues.concat(response.data))
      setNewIssue('')
    })
}
  

  useEffect(() => {
          axios
            .get('http://localhost:3001/notes')
            .then(response => {
                        setNotes(response.data)
                      })
        }, [])
      console.log('render', notes.length, 'notes')
      console.log("hello")
	
 const addNote = event => {
  event.preventDefault()
  const noteObject = {
    content: newNote,
    date: new Date(),
    important: Math.random() > 0.5,
  }

  axios
    .post('http://localhost:3001/notes', noteObject)
    .then(response => {
      setNotes(notes.concat(response.data))
      setNewNote('')
    })
}

  return(
      <div className="add-issue">
      <form>
      <Form>
              <Form.Label>Issue Description</Form.Label>
              <Form.Control as="textarea" rows={3} 
                id="description"
                onKeyUp={() => setDesc(document.getElementById("description").value)}
                />
      </Form>
      <label>
      <div>
      Assign to
      </div>
      <div ClassName = "select-2"> 
            <InputGroup className="mb-3">
              <Form.Control aria-label="Text input with dropdown button"
                id="des2"
                onKeyUp={() => setDev(document.getElementById("des2").value)}
                />

              <DropdownButton
                variant="outline-secondary"
                title="Previous"
                id="i2"
                align="end"

              >
                <Dropdown.Item href="#">1</Dropdown.Item>
                <Dropdown.Item href="#">2</Dropdown.Item>
                <Dropdown.Item href="#">3</Dropdown.Item>
              </DropdownButton>
            </InputGroup>
      Priority Level
      </div>
      <select name="forDev"
       id="desc3"
       onChange={() => setPrior(document.getElementById("desc3").value)}
      >
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
          <option value="Very High">Very High</option>
      </select>
      </label>
      <button type="submit" onSubmit={(e) => 
        {e.preventDefault()
        issueadd()
        }}>Add</button>
      </form>
      </div>
  );
}
export default AddIssue;
